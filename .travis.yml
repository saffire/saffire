language: c

before_script:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then ./ci/travis/linux/before_script.sh; fi

before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then ./ci/travis/linux/before_install.sh; fi

# Compile on gcc and clan
compiler:
  - clang
  - gcc

# Separate debug and release targets
env:
  - TARGET=debug
  - TARGET=release

# Build target. But only on release target, we can run our unit-tests
script: ./build.sh -t $TARGET -t && (SAFFIRE_TEST_BIN=build/release/saffire sh unittest.sh || true)

notifications:
  irc: "irc.freenode.org#saffire"
